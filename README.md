<p align="center">
  <a href="README.en.md">English Version</a> | –†—É—Å—Å–∫–∞—è –í–µ—Ä—Å–∏—è
</p>

<h1 align="center">ü§ñ VPS Manager Telegram Bot</h1>

<p align="center">
  <b >v1.13.2</b> ‚Äî –º–æ—â–Ω—ã–π Telegram-–±–æ—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∞—à–µ–π <b>—Å–µ—Ç—å—é —Å–µ—Ä–≤–µ—Ä–æ–≤</b>. –¢–µ–ø–µ—Ä—å –Ω–∞ –±–∞–∑–µ <b>SQLite</b> –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é <b>–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ —è–¥—Ä–∞</b> (AsyncIO). –ü–æ–¥–¥–µ—Ä–∂–∫–∞ <b>–º–Ω–æ–∂–µ—Å—Ç–≤–∞ –Ω–æ–¥</b>, –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ –ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å <b>Docker</b>.
</p>

<p align="center">
  <a href="https://github.com/jatixs/tgbotvpscp/releases/latest"><img src="https://img.shields.io/badge/version-v1.13.2-blue?style=flat-square" alt="Version 1.13.2"/></a>
  <a href="CHANGELOG.md"><img src="https://img.shields.io/badge/build-54-purple?style=flat-square" alt="Build 54"/></a>
  <a href="https://www.python.org/"><img src="https://img.shields.io/badge/python-3.10%2B-green?style=flat-square" alt="Python 3.10+"/></a>
  <a href="https://choosealicense.com/licenses/gpl-3.0/"><img src="https://img.shields.io/badge/license-GPL--3.0-lightgrey?style=flat-square" alt="License GPL-3.0"/></a>
  <a href="https://github.com/aiogram/aiogram"><img src="https://img.shields.io/badge/aiogram-3.x-orange?style=flat-square" alt="Aiogram 3.x"/></a>
  <a href="https://www.docker.com/"><img src="https://img.shields.io/badge/docker-required-blueviolet?style=flat-square" alt="Docker"/></a>
  <a href="https://releases.ubuntu.com/focal/"><img src="https://img.shields.io/badge/platform-Ubuntu%2020.04%2B-important?style=flat-square" alt="Platform Ubuntu 20.04+"/></a>
  <a href="https://github.com/jatixs/tgbotvpscp/actions/workflows/security.yml/"><img src="https://github.com/jatixs/tgbotvpscp/actions/workflows/security.yml/badge.svg" alt="Security Scan"/></a>
</p>

---

## üìò –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞](#-–æ–ø–∏—Å–∞–Ω–∏–µ-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏](#-–∫–ª—é—á–µ–≤—ã–µ-—Ñ—É–Ω–∫—Ü–∏–∏)
3. [–ì–∞–ª–µ—Ä–µ—è](#-–≥–∞–ª–µ—Ä–µ—è)
4. [–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç)](#-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ-–Ω–∞-vps-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
   - [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞](#1-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞)
   - [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –û—Å–Ω–æ–≤–Ω–æ–≥–æ –ë–æ—Ç–∞ (Master)](#2-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–æ—Å–Ω–æ–≤–Ω–æ–≥–æ-–±–æ—Ç–∞-master)
   - [–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ù–æ–¥ (–ö–ª–∏–µ–Ω—Ç–æ–≤)](#3-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ-–Ω–æ–¥-–∫–ª–∏–µ–Ω—Ç–æ–≤)
   - [–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã](#-–ø–æ–ª–µ–∑–Ω—ã–µ-–∫–æ–º–∞–Ω–¥—ã)
4. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#Ô∏è-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
5. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
6. [–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –º–æ–¥—É–ª—è](#-–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ-—Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ-–º–æ–¥—É–ª—è)
7. [–ê–≤—Ç–æ—Ä](#-–∞–≤—Ç–æ—Ä)

---

## üß© –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**VPS Manager Telegram Bot** ‚Äî —ç—Ç–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ Telegram. –ë–æ—Ç —ç–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–ª –≤ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (**Agent**) –∏ —Å–µ—Ç–∏ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —É–∑–ª–æ–≤ (**Nodes**) –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

–ü—Ä–æ–µ–∫—Ç –º–æ–¥—É–ª—å–Ω—ã–π –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –¥–≤—É—Ö —Ä–µ–∂–∏–º–∞—Ö:
1.  **Agent (–ë–æ—Ç):** –£–ø—Ä–∞–≤–ª—è—é—â–∏–π —Ü–µ–Ω—Ç—Ä —Å Telegram-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º API, –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö SQLite –∏ Web-–∞–¥–º–∏–Ω–∫–æ–π.
2.  **Node (–ê–≥–µ–Ω—Ç):** –õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç (`tg-node`) –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω—ã—Ö VPS. –ü–µ—Ä–µ–¥–∞–µ—Ç —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã.

---

## ‚ö° –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
* **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —è–¥—Ä–æ:** –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `aiohttp` –∏ `aiosqlite`. –ù–∏–∫–∞–∫–∏—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö –∏–ª–∏ –∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö.
* **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite:** –ù–∞–¥–µ–∂–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–æ–¥, –∑–∞–¥–∞—á –∏ –∏—Å—Ç–æ—Ä–∏–∏ –º–µ—Ç—Ä–∏–∫. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON.
* **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –ó–∞—â–∏—Ç–∞ –æ—Ç Shell Injection (`shlex`), —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —Å–µ—Å—Å–∏–∏, Rate Limiter –∏ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ XSS.

### üñ• –ú—É–ª—å—Ç–∏-—Å–µ—Ä–≤–µ—Ä–Ω–æ—Å—Ç—å (–ù–æ–¥—ã)
* **–ï–¥–∏–Ω—ã–π —Ü–µ–Ω—Ç—Ä:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º —á–∏—Å–ª–æ–º —Å–µ—Ä–≤–µ—Ä–æ–≤.
* **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –°—Ç–∞—Ç—É—Å (Online/Offline), –ø–∏–Ω–≥, –∞–ø—Ç–∞–π–º –∏ —Ä–µ—Å—É—Ä—Å—ã –≤—Å–µ—Ö –Ω–æ–¥.
* **–£–¥–∞–ª–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** `Reboot`, `Speedtest`, `Traffic`, `Top` –Ω–∞ –ª—é–±–æ–º —Å–µ—Ä–≤–µ—Ä–µ.
* **Web Status Page:** HTML-–¥–∞—à–±–æ—Ä–¥ (`http://IP:8080`) —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

### üõ† –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
* üê≥ **–ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Docker:** –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ –æ–¥–∏–Ω –∫–ª–∏–∫ (`secure` –∏ `root` —Ä–µ–∂–∏–º—ã).
* üåê **–ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å (i18n):** –†—É—Å—Å–∫–∏–π –∏ –ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫–∏.
* üíª **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤:** CPU, RAM, Disk, Uptime (–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤ Docker-root).
* üì° **–°–µ—Ç–µ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:** –¢—Ä–∞—Ñ–∏–∫ –∏ —Å–∫–æ—Ä–æ—Å—Ç—å (iperf3) –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
* üîî **–£–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** –ê–ª–µ—Ä—Ç—ã –æ —Ä–µ—Å—É—Ä—Å–∞—Ö, SSH-–≤—Ö–æ–¥–∞—Ö, –±–∞–Ω–∞—Ö Fail2Ban –∏ **–¥–∞—É–Ω—Ç–∞–π–º–µ –Ω–æ–¥**.
* ‚ú® **Smart Installer (`deploy.sh`):** –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ë–æ—Ç–∞ –∏ –ù–æ–¥.
* üöÄ **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:** –ü–∏–Ω–≥, Speedtest, –¢–æ–ø –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.
* üõ°Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –õ–æ–≥–∏ SSH –∏ Fail2Ban.
* üîë **VLESS & Xray:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–æ–∫, QR-–∫–æ–¥–æ–≤ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —è–¥–µ—Ä (Marzban/Amnezia).

---
## üì∏ –ì–∞–ª–µ—Ä–µ—è

<details>
  <summary><b>üì± Telegram Bot (–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞)</b></summary>

  | –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ |
  |:---:|:---:|:---:|
  | ![Bot 1](assets/bot_1.png) | ![Bot 2](assets/bot_2.png) | ![Bot 3](assets/bot_3.png) |
  | **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** | **–£—Ç–∏–ª–∏—Ç—ã** | **–ù–æ–¥—ã** |
  | ![Bot 4](assets/bot_4.png) | ![Bot 5](assets/bot_5.png) | ![Bot 6](assets/bot_6.png) |

</details>

<details>
  <summary><b>üíª Web Dashboard (–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞)</b></summary>

  | –î–∞—à–±–æ—Ä–¥ | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ |
  |:---:|:---:|
  | ![Web 1](assets/web_1.png) | ![Web 2](assets/web_2.png) |
  | **–ì—Ä–∞—Ñ–∏–∫–∏** | **–õ–æ–≥–∏** |
  | ![Web 3](assets/web_3.png) | ![Web 4](assets/web_4.png) |
  | **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** | **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** |
  | ![Web 5](assets/web_5.png) | ![Web 6](assets/web_6.png) |
  
  <p align="center">
    <b>üì± –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ / –Ø–∑—ã–∫–∏</b><br>
    <img src="assets/web_7.png" width="60%">
  </p>

</details>

---

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ VPS (–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç)

–¢—Ä–µ–±—É–µ—Ç—Å—è **Ubuntu 20.04+** (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥) –∏ `sudo` –¥–æ—Å—Ç—É–ø.

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

1.  –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤ **[@BotFather](https://t.me/BotFather)**.
2.  –£–∑–Ω–∞–π—Ç–µ —Å–≤–æ–π **User ID** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ [@userinfobot](https://t.me/userinfobot)).
3.  –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã `curl` –∏ `git`.

---

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –û—Å–Ω–æ–≤–Ω–æ–≥–æ –ë–æ—Ç–∞ (Master)

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
bash <(wget -qO- https://raw.githubusercontent.com/jatixs/tgbotvpscp/main/deploy.sh)
````

1.  –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º **Docker - Secure**).
2.  –í–≤–µ–¥–∏—Ç–µ **–¢–æ–∫–µ–Ω** –∏ **ID –∞–¥–º–∏–Ω–∞**.
3.  –ë–æ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∏ –æ—Ç–∫—Ä–æ–µ—Ç API-—Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É `8080`.

-----

### 3. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ù–æ–¥ (–ö–ª–∏–µ–Ω—Ç–æ–≤)

–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞:

1.  **–í Telegram-–±–æ—Ç–µ:**
      * –ú–µ–Ω—é **üñ• –ù–æ–¥—ã** -> **‚ûï –î–æ–±–∞–≤–∏—Ç—å –ù–æ–¥—É**.
      * –í–≤–µ–¥–∏—Ç–µ –∏–º—è. –ë–æ—Ç –≤—ã–¥–∞—Å—Ç **–¢–æ–∫–µ–Ω**.
2.  **–ù–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ:**
      * –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–æ—Ç –∂–µ —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏:
        ```bash
        bash <(wget -qO- https://raw.githubusercontent.com/jatixs/tgbotvpscp/main/deploy.sh)
        ```
      * –í—ã–±–µ—Ä–∏—Ç–µ **8) –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ù–û–î–£ (–ö–ª–∏–µ–Ω—Ç)**.
      * –í–≤–µ–¥–∏—Ç–µ:
          * **URL –ê–≥–µ–Ω—Ç–∞:** –ê–¥—Ä–µ—Å –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞ (–Ω–∞–ø—Ä. `http://1.2.3.4:8080`).
          * **–¢–æ–∫–µ–Ω:** –ü–æ–ª—É—á–µ–Ω–Ω—ã–π –≤ –±–æ—Ç–µ.

–ê–≥–µ–Ω—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∫–∞–∫ —Å–µ—Ä–≤–∏—Å `tg-node` –∏ –ø–æ—è–≤–∏—Ç—Å—è –≤ –±–æ—Ç–µ.

-----

### üß∞ –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

#### üïπ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏

| –î–µ–π—Å—Ç–≤–∏–µ | Systemd (–û–±—ã—á–Ω—ã–π) | Docker (–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã) |
| :--- | :--- | :--- |
| **–°—Ç–∞—Ç—É—Å –ë–æ—Ç–∞** | `sudo systemctl status tg-bot` | `docker compose -f /opt/tg-bot/docker-compose.yml ps` |
| **–°—Ç–∞—Ç—É—Å Watchdog** | `sudo systemctl status tg-watchdog` | *–ó–∞–ø—É—â–µ–Ω –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ watchdog* |
| **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ë–æ—Ç–∞** | `sudo systemctl restart tg-bot` | `docker compose -f /opt/tg-bot/docker-compose.yml restart bot-secure` (–∏–ª–∏ `bot-root`) |
| **–û—Å—Ç–∞–Ω–æ–≤–∫–∞** | `sudo systemctl stop tg-bot` | `docker compose -f /opt/tg-bot/docker-compose.yml stop` |
| **–ó–∞–ø—É—Å–∫** | `sudo systemctl start tg-bot` | `docker compose -f /opt/tg-bot/docker-compose.yml up -d` |

#### üìú –õ–æ–≥–∏ –∏ –û—Ç–ª–∞–¥–∫–∞

| –î–µ–π—Å—Ç–≤–∏–µ | Systemd | Docker |
| :--- | :--- | :--- |
| **–õ–æ–≥–∏ –ë–æ—Ç–∞ (Live)** | `sudo journalctl -u tg-bot -f` | `docker compose -f /opt/tg-bot/docker-compose.yml logs -f bot-secure` |
| **–õ–æ–≥–∏ Watchdog** | `sudo journalctl -u tg-watchdog -f` | `docker compose -f /opt/tg-bot/docker-compose.yml logs -f watchdog` |
| **–û—à–∏–±–∫–∏ (grep)** | `grep "ERROR" /opt/tg-bot/logs/bot/bot.log` | *–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ (—Ñ–∞–π–ª—ã –ª–æ–≥–æ–≤ –ø—Ä–æ–±—Ä–æ—à–µ–Ω—ã –Ω–∞ —Ö–æ—Å—Ç)* |

#### üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

| –î–µ–π—Å—Ç–≤–∏–µ | –ö–æ–º–∞–Ω–¥–∞ (–í—ã–ø–æ–ª–Ω—è—Ç—å –≤ `/opt/tg-bot/`) |
| :--- | :--- |
| **–ë—ç–∫–∞–ø –ë–î** | `cp config/nodes.db config/nodes.db.bak_$(date +%F)` |
| **–†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** | `git pull && source venv/bin/activate && pip install -r requirements.txt && sudo systemctl restart tg-bot` |
| **–°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è Web** | *–£–¥–∞–ª–∏—Ç–µ —Å—Ç—Ä–æ–∫—É `password_hash` —É –∞–¥–º–∏–Ω–∞ –≤ `config/users.json` –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞* |

#### üñ• –î–ª—è –ù–æ–¥—ã (–ö–ª–∏–µ–Ω—Ç–∞)

| –î–µ–π—Å—Ç–≤–∏–µ | –ö–æ–º–∞–Ω–¥–∞ |
| :--- | :--- |
| **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫** | `sudo systemctl restart tg-node` |
| **–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–∞** | `sudo journalctl -u tg-node -f` |
| **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥–∞** | `cat /opt/tg-bot/.env` |

*(–î–ª—è Docker Secure –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `bot-secure` –≤–º–µ—Å—Ç–æ `bot-root`)*

-----

## ‚öôÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
/opt/tg-bot/
‚îú‚îÄ‚îÄ bot.py            # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (Master)
‚îú‚îÄ‚îÄ watchdog.py       # –°–∏—Å—Ç–µ–º–∞ –æ–ø–æ–≤–µ—â–µ–Ω–∏–π –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
‚îú‚îÄ‚îÄ deploy.sh         # –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫
‚îú‚îÄ‚îÄ requirements.txt  # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (aiosqlite, aiohttp...)
‚îú‚îÄ‚îÄ Dockerfile        # –°–±–æ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑–∞
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ .env              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ nodes.db      # [NEW] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite
‚îÇ   ‚îú‚îÄ‚îÄ users.json    # –ö–æ–Ω—Ñ–∏–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ node/             # –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å
‚îÇ   ‚îî‚îÄ‚îÄ node.py       # –°–∫—Ä–∏–ø—Ç –∞–≥–µ–Ω—Ç–∞
‚îÇ
‚îú‚îÄ‚îÄ core/             # –Ø–¥—Ä–æ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ server.py     # –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π Web-—Å–µ—Ä–≤–µ—Ä (aiohttp)
‚îÇ   ‚îú‚îÄ‚îÄ nodes_db.py   # [NEW] –ú–µ–Ω–µ–¥–∂–µ—Ä –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ utils.py      # –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ modules/          # –ú–æ–¥—É–ª–∏ —Ñ—É–Ω–∫—Ü–∏–π
    ‚îú‚îÄ‚îÄ nodes.py      # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–¥–∞–º–∏
    ‚îú‚îÄ‚îÄ speedtest.py  # –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π Speedtest
    ‚îî‚îÄ‚îÄ ...
```

-----

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

  * **–ò–∑–æ–ª—è—Ü–∏—è:** Secure-—Ä–µ–∂–∏–º –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `tgbot`.
  * **–ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö:** SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —Å–µ—Å—Å–∏–∏, Rate Limiter.
  * **–ó–∞—â–∏—Ç–∞ –æ—Ç –∏–Ω—ä–µ–∫—Ü–∏–π:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `shlex` –¥–ª—è —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥.
  * **–¢–æ–∫–µ–Ω—ã:** –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–æ–¥—ã.

<details>
<summary><h2>üß© –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥—É–ª—è</h2></summary>

1.  **–§–∞–π–ª:** –°–æ–∑–¥–∞–π—Ç–µ `modules/my_module.py`.
2.  **–ö–æ–¥:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `BUTTON_KEY` –∏ `register_handlers(dp)`.
3.  **i18n:** –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫–∏ –≤ `core/i18n.py`.
4.  **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:** –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤ `bot.py` –∏ –¥–æ–±–∞–≤—å—Ç–µ `register_module()`.
5.  **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫:** `sudo systemctl restart tg-bot`.

**[–ü–æ–ª–Ω–æ—Ñ–æ—Ä–º–∞—Ç–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è](/custom_module.md)**.
</details>

-----

## üë§ –ê–≤—Ç–æ—Ä

**–í–µ—Ä—Å–∏—è:** 1.13.2 (Build 54) <br>
**–ê–≤—Ç–æ—Ä:** Jatix <br>
üìú **–õ–∏—Ü–µ–Ω–∑–∏—è:** GPL-3.0 <br>
